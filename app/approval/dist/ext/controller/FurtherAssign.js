sap.ui.define(["sap/m/MessageToast","sap/m/Select","sap/m/Label","sap/m/Dialog","sap/m/Button","sap/ui/layout/VerticalLayout","jquery.sap.global"],function(e,t,a,s,r,o){"use strict";return{FurtherAssign:async function(n){debugger;var i=this.byId("approval::complainsObjectPage--fe::CustomSubSection::Comments--ta").getValue();var l=window.location.href;var c=/complains\('([^']+)'\)/;var u=l.match(c);var m=u[1];var p="Further Assigned";let v=JSON.stringify({complainno:m,cstatus:p});var d="/odata/v4/my/complains/"+m;var g=this._view.getModel().sServiceUrl;let w="submitcomplaints";var y=this._view.getModel().bindContext(`/${w}(...)`);y.setParameter("data",v);y.setParameter("status",JSON.stringify({status:"patchComp1"}));var f=new t({items:{path:"/approvers",template:new sap.ui.core.Item({key:"{keyy}",text:"{name}"})}});var h=new sap.ui.model.json.JSONModel;await $.ajax({url:g+`approvers`,type:"GET",success:function(e){debugger;let t=e.value;var a=t.map(e=>({name:e.name}));h.setData({approvers:a});f.setModel(h)},error:function(e,t,a){console.error("Error fetching approvers:",a)}});var b=new s({title:"Submit",resizable:true,draggable:true,content:[new o({content:[new a({text:"Select Person to Further Assign:"}),f]})],buttons:[new r({text:"Yes",press:async function(){await y.execute();var t=JSON.stringify({complainno:m,comments:i});y.setParameter("data",t);y.setParameter("status",JSON.stringify({status:"postComm"}));await y.execute();b.close();e.show("The complaint has been forwarded successfully");location.reload()}}),new r({text:"No",press:function(){b.close();e.show("Cancelled")}})]}).addStyleClass("myCustomDialogClass");b.open()}}});